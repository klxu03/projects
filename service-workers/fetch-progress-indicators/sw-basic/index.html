<!-- This page loads Service Worker and won't be shown again after it refreshes for SW interception. -->

<html>
	<head>
		<meta charset="utf8" />
		<title>Basic Service Worker Progress Indicator</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="icon" href="../favicon.ico" type="image/png" />
		<style>
			html,
			body {
				padding: 0;
				margin: 0;
				height: 100%;
			}
			body {
				text-align: center;
				font-size: 16px;
				padding: 5em 1em 1em;
				box-sizing: border-box;
				font-family: sans-serif;
				display: flex;
				flex-flow: column nowrap;
				justify-content: space-between;
			}
			footer a {
				padding: 1em;
				display: inline-block;
			}
		</style>

		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-50610215-6"
		></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());
			gtag("config", "UA-50610215-6");
		</script>
	</head>
	<body>
		<main>
			<div id="status">Installing Service Worker...</div>
		</main>
		<footer>
			<a href="../">More Examples</a>
			<a href="https://github.com/AnthumChris/fetch-progress-indicators"
				>View on GitHub</a
			>
		</footer>

		<script>
			"use strict";

			var elStatus = document.getElementById("status");

			// Ensure unsupported browsers don't load invalid JS (e.g. ES6, Promises), compile successfully, and show errors
			if (!(navigator.serviceWorker && window.fetch && window.ReadableStream)) {
				status(
					"Service Worker, Fetch, or ReadableStream API is not supported in this browser.<p>This demo cannot function without them."
				);
			} else {
				var script = document.createElement("script");
				script.src = "supported-browser-install.js";
				document.body.append(script);
			}

			function status(text) {
				elStatus.innerHTML = text;
			}
		</script>
	</body>
</html>
